<rolltemplate class="sheet-rolltemplate-5e-shaped">
  <div class="rt-card">
    <div class="rt-header relative{{#action}} action{{/action}}{{#spell}} spell{{/spell}}{{#ability}} ability{{/ability}}{{#saving_throw}} saving-throw{{/saving_throw}}{{#death_save}} death-save{{/death_save}}">
      <div class="rt-title">{{title}}</div>
      {{#show_character_name}}
        <div class="rt-subheader">{{character_name}}</div>
      {{/show_character_name}}
      {{#spell}}
        <div class="rt-subheader italic">{{friendly_level}}{{#cast_as_level}} (as {{cast_as_level}}){{/cast_as_level}}{{#school}} {{school}}{{/school}}{{#ritual}} (ritual){{/ritual}}</div>
      {{/spell}}
      {{#action}}
        <div class="rt-subheader">
          {{#reach}}{{reach}} reach{{/reach}}
          {{#range}}{{#reach}} &bullet; {{/reach}}{{range}} range{{/range}}
          {{#ammo}}{{#range}} &bullet; {{/range}}{{ammo}} ammo{{/ammo}}
        </div>
        {{#target}}
          <div class="rt-subheader">{{target}}</div>
        {{/target}}
      {{/action}}
      {{#subheader}}
        <div class="rt-subheader">{{subheader}}</div>
      {{/subheader}}
      {{#targetName}}
        <div class="rt-subheader">vs {{targetName}}</div>
      {{/targetName}}
    </div>
    {{#emote}}
      <p class="rt-emote">{{character_name}} {{emote}}</p>
    {{/emote}}
    <div class="rt-content">
      {{#spell}}
        {{#casting_time}}
          <div class="no-border">
            <span class="bold">Casting Time:</span>
            {{casting_time}}
          </div>
        {{/casting_time}}
        {{#range}}
          <div class="no-border">
            <span class="bold">Range:</span>
            {{range}}
          </div>
        {{/range}}
        {{#components}}
          <div class="no-border">
            <span class="bold">Components:</span>
            {{components}}
            {{#materials}}({{materials}}){{/materials}}
          </div>
        {{/components}}
        {{#duration}}
          <div class="no-border">
            <span class="bold">Duration:</span>
            {{duration}}
          </div>
        {{/duration}}
        {{#target}}
          <div class="no-border">
            <span class="bold">Target:</span>
            {{target}}
          </div>
        {{/target}}
      {{/spell}}
      {{#content}}
        <div class="mar-t-md">{{content}}</div>
      {{/content}}
      {{#text_top}}
        <div class="output center">{{text_top}}</div>
      {{/text_top}}
      {{#roll_toggle}}
        <div class="shaped-row center">
          <div class="col-{{^only_roll_1}}50{{/only_roll_1}}{{#only_roll_1}}100{{/only_roll_1}} output">
            {{#rollLess() roll1 roll2}}{{#advantage}}<div class="less-important">{{/advantage}}{{/rollLess() roll1 roll2}}
            {{#rollGreater() roll1 roll2}}{{#disadvantage}}<div class="less-important">{{/disadvantage}}{{/rollGreater() roll1 roll2}}
              {{roll1}}
            {{#rollLess() roll1 roll2}}{{#advantage}}</div>{{/advantage}}{{/rollLess() roll1 roll2}}
            {{#rollGreater() roll1 roll2}}{{#disadvantage}}</div>{{/disadvantage}}{{/rollGreater() roll1 roll2}}
          </div>
          {{^only_roll_1}}
            <div class="col-50 output border-left">
              {{#rollLess() roll2 roll1}}{{#advantage}}<div class="less-important">{{/advantage}}{{/rollLess() roll2 roll1}}
              {{#rollGreater() roll2 roll1}}{{#disadvantage}}<div class="less-important">{{/disadvantage}}{{/rollGreater() roll2 roll1}}
                {{roll2}}
              {{#rollLess() roll2 roll1}}{{#advantage}}</div>{{/advantage}}{{/rollLess() roll2 roll1}}
              {{#rollGreater() roll2 roll1}}{{#disadvantage}}</div>{{/disadvantage}}{{/rollGreater() roll2 roll1}}
            </div>
          {{/only_roll_1}}
          {{#vs_ac}}
            <div class="col-100 output-small-label">vs AC{{#targetAC}} {{targetAC}}{{/targetAC}}</div>
          {{/vs_ac}}
        </div>
      {{/roll_toggle}}
      {{#saving_throw_dc}}
        <div class="center">
          {{#saving_throw_condition}}
            <div class="output-small-label">{{saving_throw_condition}}</div>
          {{/saving_throw_condition}}
          {{#saving_throw_dc}}
            <div class="output">
                <span class="{{#hide_saving_throw_dc}} gm-info-inline-block{{/hide_saving_throw_dc}}">DC {{saving_throw_dc}}</span>
                {{saving_throw_vs_ability}}
            </div>
            <div>saving throw</div>
          {{/saving_throw_dc}}
          {{#saving_throw_failure}}
            <div class="{{#hide_saving_throw_failure}} gm-info-block{{/hide_saving_throw_failure}}">
              <span class="bold italic">Save Failure.</span>
              {{saving_throw_failure}}
            </div>
          {{/saving_throw_failure}}
          {{#saving_throw_success}}
            <div class="{{#hide_saving_throw_success}} gm-info-block{{/hide_saving_throw_success}}">
              <span class="bold italic">Save Success.</span>
              {{saving_throw_success}}
            </div>
          {{/saving_throw_success}}
        </div>
      {{/saving_throw_dc}}
      {{#damage}}
        <div class="shaped-row zebra center vert-center">
          <div class="col-47">
            <div class="output">
              {{damage}}
              {{#roll_toggle}}
                {{#rollWasCrit() roll1}}
                  {{#only_roll_1}}<span>+ {{crit_damage}}</span>{{/only_roll_1}}
                  {{^only_roll_1}}
                    {{#rollWasCrit() roll2}}
                      <span>+ {{crit_damage}}</span>
                    {{/rollWasCrit() roll2}}
                    {{#^rollWasCrit() roll2}}
                      {{#^rollLess() roll1 roll2}}
                        {{#advantage}}<span>+ {{crit_damage}}</span>{{/advantage}}
                      {{/^rollLess() roll1 roll2}}
                    {{/^rollWasCrit() roll2}}
                  {{/only_roll_1}}
                {{/rollWasCrit() roll1}}
                {{^only_roll_1}}
                  {{#rollWasCrit() roll2}}
                    {{#^rollWasCrit() roll1}}
                      {{#^rollLess() roll2 roll1}}
                        {{#advantage}}<span>+ {{crit_damage}}</span>{{/advantage}}
                      {{/^rollLess() roll2 roll1}}
                    {{/^rollWasCrit() roll1}}
                  {{/rollWasCrit() roll2}}
                {{/only_roll_1}}
              {{/roll_toggle}}
            </div>
            <div class="output-small-label">{{damage_type}}{{^damage_type}}damage{{/damage_type}}</div>
          </div>
      {{/damage}}
      {{#second_damage}}
        {{#damage}}
          <div class="output col-06">
            +
          </div>
        {{/damage}}
        {{^damage}}
          <div class="shaped-row zebra center vert-center">
        {{/damage}}
          <div class="col-47">
            <div class="output">
              {{second_damage}}
              {{#roll_toggle}}
                {{#rollWasCrit() roll1}}
                  {{#only_roll_1}}<span>+ {{second_crit_damage}}</span>{{/only_roll_1}}
                  {{^only_roll_1}}
                    {{#rollWasCrit() roll2}}
                      <span>+ {{second_crit_damage}}</span>
                    {{/rollWasCrit() roll2}}
                    {{#^rollWasCrit() roll2}}
                      {{#^rollLess() roll1 roll2}}
                        {{#advantage}}<span>+ {{second_crit_damage}}</span>{{/advantage}}
                      {{/^rollLess() roll1 roll2}}
                    {{/^rollWasCrit() roll2}}
                  {{/only_roll_1}}
                {{/rollWasCrit() roll1}}
                {{^only_roll_1}}
                  {{#rollWasCrit() roll2}}
                    {{#^rollWasCrit() roll1}}
                      {{#^rollLess() roll2 roll1}}
                        {{#advantage}}<span>+ {{second_crit_damage}}</span>{{/advantage}}
                      {{/^rollLess() roll2 roll1}}
                    {{/^rollWasCrit() roll1}}
                  {{/rollWasCrit() roll2}}
                {{/only_roll_1}}
              {{/roll_toggle}}
            </div>
            <div class="output-small-label">{{second_damage_type}}{{^second_damage_type}}damage{{/second_damage_type}}</div>
          </div>
        {{^damage}}
          </div>
        {{/damage}}
      {{/second_damage}}
      {{#damage}}
        </div>
      {{/damage}}
      {{#heal}}
        <div class="center vert-center output">
          Heal for {{heal}} HP
        </div>
      {{/heal}}
      {{#death_saving_throw_successes}}
        <div class="center">
          Successes {{death_saving_throw_successes}} / 3
        </div>
      {{/death_saving_throw_successes}}
      {{#death_saving_throw_failures}}
        <div class="col-100 center">
          Failures {{death_saving_throw_failures}} / 3
        </div>
      {{/death_saving_throw_failures}}
      {{#text}}
        <div class="center">{{text}}</div>
      {{/text}}
      {{#text_big}}
        <div class="output center">{{text_big}}</div>
      {{/text_big}}

      {{#allprops() freetext text text_big text_top character_name saving_throw title ignore show_character_name subheader roll_toggle roll1 roll2 only_roll_1 advantage disadvantage vs_ac ability emote death_save death_saving_throw_successes death_saving_throw_failures targetAC targetName action type damage damage_type crit_damage second_damage second_damage_type second_crit_damage ranged damage target reach range ammo spell saving_throw_condition saving_throw_dc saving_throw_vs_ability saving_throw_success saving_throw_failure friendly_level school ritual content cast_as_level heal casting_time duration components materials hide_saving_throw_dc hide_saving_throw_failure hide_saving_throw_success recharge hide_recharge}}
        <div class="center">
          <span class="bold italic">{{key}}.</span>
          {{value}}
        </div>
      {{/allprops() freetext text text_big text_top character_name saving_throw title ignore show_character_name subheader roll_toggle roll1 roll2 only_roll_1 advantage disadvantage vs_ac ability emote death_save death_saving_throw_successes death_saving_throw_failures targetAC targetName action type damage damage_type crit_damage second_damage second_damage_type second_crit_damage ranged damage target reach range ammo spell saving_throw_condition saving_throw_dc saving_throw_vs_ability saving_throw_success saving_throw_failure friendly_level school ritual content cast_as_level heal casting_time duration components materials hide_saving_throw_dc hide_saving_throw_failure hide_saving_throw_success recharge hide_recharge}}

      {{#freetext}}
        <div class="center">{{freetext}}</div>
      {{/freetext}}
      {{#recharge}}
        <div class="center{{#hide_recharge}} gm-info-block{{/hide_recharge}}">
          <span class="bold italic">Recharge.</span>
          {{recharge}}
        </div>
      {{/recharge}}
    </div>
  </div>
</rolltemplate>