<rolltemplate class="sheet-rolltemplate-5eDefault">
  <div class="sheet-rt-card">
    <div class="sheet-rt-header{{#attack_roll}} sheet-attack{{/attack_roll}}{{#weapon}} sheet-weapon{{/weapon}}{{#action}} sheet-action{{/action}}{{#spell}} sheet-spell{{/spell}}{{#ability}} sheet-ability{{/ability}}{{#save}} sheet-save{{/save}}{{#deathsave}} sheet-deathsave{{/deathsave}}">
      <div class="sheet-rt-title">{{title}}</div>
      {{#subheader}}
        <div class="sheet-rt-subheader">{{subheader}}{{#subheaderright}} &bullet; {{subheaderright}}{{/subheaderright}}</div>
      {{/subheader}}
      {{#subheader2}}
        <div class="sheet-rt-subheader">{{subheader2}}{{#subheaderright2}} &bullet; {{subheaderright2}}{{/subheaderright2}}</div>
      {{/subheader2}}
      <div class="sheet-rt-subheader">
        {{#spellconcentration}}(Concentration){{/spellconcentration}}
        {{#spellritual}}(Ritual){{/spellritual}}
      </div>
      <div class="sheet-rt-subheader">
        <div class="sheet-row sheet-center">
          {{#target}}
            <div class="sheet-col-2-5 sheet-pad-l-md sheet-pad-r-md sheet-center">
              <div>Target</div>
              <div class="sheet-small-label">{{target}}</div>
            </div>
          {{/target}}
          {{#reach}}
            <div class="sheet-col-1-4 sheet-pad-l-md sheet-pad-r-md sheet-center">
              <div>Reach</div>
              <div class="sheet-small-label">{{reach}}</div>
            </div>
          {{/reach}}
          {{#range}}
            <div class="sheet-col-7-20 sheet-pad-l-md sheet-pad-r-md sheet-center">
              <div>Range</div>
              <div class="sheet-small-label">{{range}}</div>
            </div>
          {{/range}}
        </div>
      </div>
    </div>
    {{#emote}}
      <p class="sheet-rt-emote">{{character_name}} {{emote}}</p>
    {{/emote}}
    <div class="sheet-main-content">
      <!--Weapon based attacks-->
      {{#attack}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Attack</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-smaller-letter-spacing sheet-rt-value">{{attack}} | {{attackadv}} vs AC{{#targetAC}} {{targetAC}}{{/targetAC}}</div>
        </div>
      {{/attack}}
      {{#damage}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Damage</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{damage}}</div>
        </div>
      {{/damage}}
      {{#weapon}}
        {{#rollWasCrit() attack}}
          <div class="sheet-row">
            <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Crit</div>
            <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{critdamage}}</div>
          </div>
        {{/rollWasCrit() attack}}
        {{#rollWasCrit() attackadv}}
          <div class="sheet-row">
            <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Crit (adv roll)</div>
            <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{critdamage}} (if attack was made with advantage)</div>
          </div>
        {{/rollWasCrit() attackadv}}
      {{/weapon}}

      <!--Actions/Attacks-->
      {{#action_damage}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Damage</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{action_damage}} {{action_damage_type}}{{#action_alt_damage}}, or {{action_alt_damage}} {{action_damage_type}}{{#action_alt_damage_reason}} {{action_alt_damage_reason}}{{/action_alt_damage_reason}}{{/action_alt_damage}}{{#action_second_damage}} + {{action_second_damage}} {{action_second_damage_type}}{{/action_second_damage}}</div>
        </div>
      {{/action_damage}}
      {{#can_crit}}
        {{#attack}}
          {{#rollWasCrit() attack}}
            <div class="sheet-row">
              <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Crit Dmg</div>
              <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{action_crit_damage}} {{action_damage_type}}{{#action_alt_damage}}, or {{action_alt_crit_damage}} {{action_damage_type}}{{#action_alt_damage_reason}} {{action_alt_damage_reason}}{{/action_alt_damage_reason}}{{/action_alt_damage}}{{#action_second_damage}} + {{action_second_crit_damage}} {{action_second_damage_type}}{{/action_second_damage}}</div>
            </div>
          {{/rollWasCrit() attack}}
          {{#rollWasCrit() attackadv}}
            <div class="sheet-row">
              <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Crit Dmg (adv roll)</div>
              <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{action_crit_damage_adv}} {{action_damage_type}}{{#action_alt_damage}}, or {{action_alt_crit_damage_adv}} {{action_damage_type}}{{#action_alt_damage_reason}} {{action_alt_damage_reason}}{{/action_alt_damage_reason}}{{/action_alt_damage}}{{#action_second_damage}} + {{action_second_crit_damage_adv}} {{action_second_damage_type}}{{/action_second_damage}} <span class="sheet-small-label">(if attack was made with advantage)</span></div>
            </div>
          {{/rollWasCrit() attackadv}}
        {{/attack}}
      {{/can_crit}}
      {{#save_dc}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Save</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">DC {{save_dc}} {{action_save_stat}}</div>
        </div>
      {{/save_dc}}
      {{#save_damage}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Damage</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{save_damage}} {{save_damage_type}}</div>
        </div>
      {{/save_damage}}
      {{#save_success}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Save success</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{save_success}}</div>
        </div>
      {{/save_success}}
      {{#effects}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Effect</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{effects}}</div>
        </div>
      {{/effects}}
      {{#recharge}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Recharge</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{recharge}}</div>
        </div>
      {{/recharge}}


      <!--Spellcasting-->
      {{#spellshowinfoblock}}
        <div class="sheet-row sheet-pad-b-md">
          <div class="sheet-col-1-2 sheet-pad-l-md sheet-pad-r-md sheet-center sheet-border-right-dotted">
            <span class="sheet-rt-key">Class</span>
            <br>
            <span class="sheet-rt-value">{{spellgainedfrom}}</span>
          </div>
          <div class="sheet-col-1-2 sheet-pad-l-md sheet-pad-r-md sheet-center sheet-border-left-dotted">
            <span class="sheet-rt-key">Comp.</span>
            <br>
            <span class="sheet-rt-value">{{spellcomponents}}</span>
          </div>
          <div class="sheet-col-1 sheet-border-top-dotted"></div>
          <div class="sheet-col-1-2 sheet-pad-l-md sheet-pad-r-md sheet-center sheet-border-right-dotted">
            <span class="sheet-rt-key">Cast Time</span>
            <br>
            <span class="sheet-rt-value">{{spellcasttime}}</span>
          </div>
          <div class="sheet-col-1-2 sheet-pad-l-md sheet-pad-r-md sheet-center sheet-border-left-dotted">
            <span class="sheet-rt-key">Duration</span>
            <br>
            <span class="sheet-rt-value">{{spellduration}}</span>
          </div>
          <div class="sheet-col-1 sheet-border-top-dotted"></div>
          <div class="sheet-col-1-2 sheet-pad-l-md sheet-pad-r-md sheet-center sheet-border-right-dotted">
            <span class="sheet-rt-key">Target/AoE</span>
            <br>
            <span class="sheet-rt-value">{{spelltarget}}</span>
          </div>
          <div class="sheet-col-1-2 sheet-pad-l-md sheet-pad-r-md sheet-center sheet-border-left-dotted">
            <span class="sheet-rt-key">Range</span>
            <br>
            <span class="sheet-rt-value">{{spellrange}}</span>
          </div>
        </div>
      {{/spellshowinfoblock}}
      {{#spelldescription}}
        <div class="sheet-row">
          <div class="sheet-col-1 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Spell Description</div>
          <div class="sheet-col-1 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{spelldescription}}</div>
        </div>
      {{/spelldescription}}
      {{#spellattack}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Attack</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-smaller-letter-spacing sheet-rt-value">{{spellattack}} | {{spellattackadv}} vs AC{{#targetAC}} {{targetAC}}{{/targetAC}}</div>
        </div>
      {{/spellattack}}
      {{#spellsavedc}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Save</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">DC {{spellsavedc}} {{spellsavestat}}</div>
        </div>
      {{/spellsavedc}}
      {{#spellhealing}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Healing</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spellhealing}} HP healed</div>
        </div>
      {{/spellhealing}}
      {{#spelldamage}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Damage</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spelldamage}}</div>
        </div>
      {{/spelldamage}}
      {{#spellcancrit}}
        {{#spellattack}}
          {{#rollWasCrit() spellattack}}
            <div class="sheet-row">
              <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Crit</div>
              <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spellcritdamage}}</div>
            </div>
          {{/rollWasCrit() spellattack}}
          {{#rollWasCrit() spellattackadv}}
            <div class="sheet-row">
              <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Crit (adv roll)</div>
              <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spellcritdamage}} (if attack was made with advantage)</div>
            </div>
          {{/rollWasCrit() spellattackadv}}
        {{/spellattack}}
      {{/spellcancrit}}
      {{#spelleffect}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Effect</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spelleffect}}</div>
        </div>
      {{/spelleffect}}
      {{#spellcastlvl}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Cast Level</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spellcastlvl}}</div>
        </div>
      {{/spellcastlvl}}
      {{#spellcastritual}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Ritual Cast</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spellcastritual}}</div>
        </div>
      {{/spellcastritual}}
      {{#spellsavesuccess}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Save success</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{spellsavesuccess}}</div>
        </div>
      {{/spellsavesuccess}}
      {{#spellhigherlevel}}
        <div class="sheet-row">
          <div class="sheet-col-1 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">At Higher Levels</div>
          <div class="sheet-col-1 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{spellhigherlevel}}</div>
        </div>
      {{/spellhigherlevel}}

      <!--NPC-->
      {{#npccorestats}}
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Stat</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Score</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Mod</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">Str</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_strength}}</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_strength_mod}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">Dex</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_dexterity}}</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_dexterity_mod}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">Con</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_constitution}}</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_constitution_mod}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">Int</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_intelligence}}</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_intelligence_mod}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">Wis</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_wisdom}}</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_wisdom_mod}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">Cha</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_charisma}}</div>
          <div class="sheet-col-1-3 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{npc_charisma_mod}}</div>
        </div>
      {{/npccorestats}}
      {{#npctraits}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Dmg Resistance</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{npc_damage_resistance}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Dmg Vuln.</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{npc_damage_vulnerability}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Dmg Immunity</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{npc_damage_immunity}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Condition Immunity</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{npc_condition_immunity}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Other Traits</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{npc_traits}}</div>
        </div>
      {{/npctraits}}
      {{#npcaction}}
        {{#npc_showmultiattack}}
          <div class="sheet-row">
            <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Multi Attack</div>
            <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{npc_multiattack}}</div>
          </div>
        {{/npc_showmultiattack}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Desc.</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{action_description}}</div>
        </div>
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">Effect</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{action_effect}}</div>
        </div>
      {{/npcaction}}

      <!--Generic section-->
      {{#freetext}}
        <div class="sheet-row">
          <div class="sheet-col-1 sheet-pad-l-md sheet-pad-r-md sheet-rt-key-wide">{{freetextname}}</div>
          <div class="sheet-col-1 sheet-pad-l-md sheet-pad-r-md sheet-rt-value">{{freetext}}</div>
        </div>
      {{/freetext}}
      {{#roll}}
        <div class="sheet-row">
          <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">{{rollname}}</div>
          <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{roll}}{{#rolladv}} | {{rolladv}}{{/rolladv}}</div>
        </div>
      {{/roll}}

      <!-- Class action additions -->
      {{#showclassactions}}
        {{#allprops() showclassactions character_name save title subheader subheaderright subheader2 subheaderright2 rollname roll rolladv emote deathsave targetAC weapon attack attackadv damage critdamage spell spellconcentration spellritual spellshowinfoblock spellshowdesc spelldescription spellshowhigherlvl spellhigherlevel spellshowattack spellattack spellshowattackadv spellattackadv spellshowsavethrow spellsavedc spellsavestat spellsavesuccess spellshowhealing spellhealing spellshowdamage spelldamage spellcancrit spellcritdamage spellshoweffects spelleffect spellpromptcastlvl spellcastlvl spellpromptritual spellcastritual spellcasttime spellduration spelltarget spellrange spellgainedfrom spellcomponents ability}}
          <div class="sheet-row">
            <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">{{key}}</div>
            <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{value}}</div>
          </div>
        {{/allprops() showclassactions character_name save title subheader subheaderright subheader2 subheaderright2 rollname roll rolladv emote deathsave targetAC weapon attack attackadv damage critdamage spell spellconcentration spellritual spellshowinfoblock spellshowdesc spelldescription spellshowhigherlvl spellhigherlevel spellshowattack spellattack spellshowattackadv spellattackadv spellshowsavethrow spellsavedc spellsavestat spellsavesuccess spellshowhealing spellhealing spellshowdamage spelldamage spellcancrit spellcritdamage spellshoweffects spelleffect spellpromptcastlvl spellcastlvl spellpromptritual spellcastritual spellcasttime spellduration spelltarget spellrange spellgainedfrom spellcomponents ability}}
      {{/showclassactions}}

      <!--Outputall-->
      {{#outputall}}
        {{#allprops() outputall title subheader subheaderright subheader2 subheaderright2 emote weapon spell ability save deathsave targetAC}}
          <div class="sheet-row">
            <div class="sheet-col-9-24 sheet-pad-l-md sheet-pad-r-md sheet-rt-key">{{key}}</div>
            <div class="sheet-col-15-24 sheet-pad-r-sm sheet-rt-value">{{value}}</div>
          </div>
        {{/allprops() outputall title subheader subheaderright subheader2 subheaderright2 emote weapon spell ability save deathsave targetAC}}
      {{/outputall}}
    </div>
  </div>
</rolltemplate>